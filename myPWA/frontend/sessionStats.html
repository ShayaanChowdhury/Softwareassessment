<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Stats</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <img src="logo.png" alt="Cricket Stats Logo">
        <div class="navbar-links">
            <a href="homepage.html">Home</a>
            <a href="batting.html">Batting Stats</a>
            <a href="bowling.html">Bowling Stats</a>
            <a href="index.html">Stat Calculator</a>
            <a href="sessionStats.html">Session Stats</a>
        </div>
    </nav>
    <h1>Session Stats</h1>
    
    <h2>Batting Sessions</h2>
    <table id="battingSessionsTable">
        <thead>
            <tr>
                <th>Session</th>
                <th>Runs</th>
                <th>Balls</th>
                <th>Not Out</th>
                <th>Fours</th>
                <th>Sixes</th>
                <th>Catches</th>
                <th>Edit</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Bowling Sessions</h2>
    <table id="bowlingSessionsTable">
        <thead>
            <tr>
                <th>Session</th>
                <th>Wickets</th>
                <th>Runs Given</th>
                <th>Overs Bowled</th>
                <th>Edit</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        function loadSessionStats() {
            // Fetch batting stats
            fetch('http://localhost:3001/api/batting-stats')
                .then(response => response.json())
                .then(battingData => {
                    const battingTableBody = document.getElementById("battingSessionsTable").querySelector("tbody");
                    battingTableBody.innerHTML = '';
                    battingData.forEach((session, index) => {
                        const row = battingTableBody.insertRow();
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${session.runs}</td>
                            <td>${session.balls}</td>
                            <td>${session.notOut ? 'Yes' : 'No'}</td>
                            <td>${session.fours}</td>
                            <td>${session.sixes}</td>
                            <td>${session.catches}</td>
                            <td><button onclick="editBattingSession(${index})">Edit</button></td>
                        `;
                    });
                })
                .catch(error => console.error('Error fetching batting stats:', error));

            // Fetch bowling stats
            fetch('http://localhost:3001/api/bowling-stats')
                .then(response => response.json())
                .then(bowlingData => {
                    const bowlingTableBody = document.getElementById("bowlingSessionsTable").querySelector("tbody");
                    bowlingTableBody.innerHTML = '';
                    bowlingData.forEach((session, index) => {
                        const row = bowlingTableBody.insertRow();
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${session.wickets}</td>
                            <td>${session.runsGiven}</td>
                            <td>${session.overs}</td>
                            <td><button onclick="editBowlingSession(${index})">Edit</button></td>
                        `;
                    });
                })
                .catch(error => console.error('Error fetching bowling stats:', error));
        }

        // Call to load session stats on page load
        loadSessionStats();
    </script>
</body>
</html>